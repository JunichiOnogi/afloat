"use strict";!function(H,K,B){H.fn.simpleLightbox=function(r){function n(t){t.trigger(H.Event("show.simplelightbox")),r.disableScroll&&(u=j("hide")),R.appendTo("body"),M.appendTo(R),r.overlay&&E.appendTo(H("body")),I=!0,q=g.index(t),d=H("<img/>").hide().attr("src",t.attr("href")),-1==h.indexOf(t.attr("href"))&&h.push(t.attr("href")),M.html("").attr("style",""),d.appendTo(M),W(),E.fadeIn("fast"),H(".sl-close").fadeIn("fast"),C.show(),S.fadeIn("fast"),H(".sl-wrapper .sl-counter .sl-current").text(q+1),k.fadeIn("fast"),O(),r.preloading&&z(),setTimeout(function(){t.trigger(H.Event("shown.simplelightbox"))},r.animationSpeed)}var t,e,r=H.extend({overlay:!0,spinner:!0,nav:!0,navText:["&lsaquo;","&rsaquo;"],captions:!0,captionDelay:0,captionSelector:"img",captionType:"attr",captionsData:"title",captionPosition:"bottom",close:!0,closeText:"Ã—",swipeClose:!0,showCounter:!0,fileExt:"png|jpg|jpeg|gif",animationSlide:!0,animationSpeed:250,preloading:!0,enableKeyboard:!0,loop:!0,rel:!1,docClose:!0,swipeTolerance:50,className:"simple-lightbox",widthRatio:1,heightRatio:1,disableRightClick:!1,disableScroll:!0,alertError:!0,alertErrorMessage:"Image not found, next image will be loaded",additionalHtml:!1,history:!0},r),l=(0 in K,K.navigator.pointerEnabled||K.navigator.msPointerEnabled,0),c=0,d=H(),i=function(){var t;return""===(t=(t=B.body||B.documentElement).style).WebkitTransition?"-webkit-":""===t.MozTransition?"-moz-":""===t.OTransition?"-o-":""===t.transition&&""},p=!1,h=[],g=r.rel&&!1!==r.rel?(e=r.rel,H(this.selector).filter(function(){return H(this).attr("rel")===e})):this,i=i(),u=0,f=!1!==i,a="pushState"in history,o=!1,s=K.location,m=function(){return s.hash.substring(1)},v=m(),x=function(){m();var t="pid="+(q+1),e=s.href.split("#")[0]+"#"+t;a?history[o?"replaceState":"pushState"]("",B.title,e):o?s.replace(e):s.hash=t,o=!0},b=function(){a?history.pushState("",B.title,s.pathname+s.search):s.hash="",clearTimeout(t)},y=function(){o?t=setTimeout(x,800):x()},w="simplelb",E=H("<div>").addClass("sl-overlay"),T=H("<button>").addClass("sl-close").html(r.closeText),C=H("<div>").addClass("sl-spinner").html("<div></div>"),S=H("<div>").addClass("sl-navigation").html('<button class="sl-prev">'+r.navText[0]+'</button><button class="sl-next">'+r.navText[1]+"</button>"),k=H("<div>").addClass("sl-counter").html('<span class="sl-current"></span>/<span class="sl-total"></span>'),I=!1,q=0,D=H("<div>").addClass("sl-caption pos-"+r.captionPosition),M=H("<div>").addClass("sl-image"),R=H("<div>").addClass("sl-wrapper").addClass(r.className),O=function(a){var o,s,l;d.length&&(o=new Image,s=H(K).width()*r.widthRatio,l=H(K).height()*r.heightRatio,o.src=d.attr("src"),H(o).bind("error",function(t){g.eq(q).trigger(H.Event("error.simplelightbox")),p=!(I=!1),C.hide(),r.alertError&&alert(r.alertErrorMessage),N(1==a||-1==a?a:1)}),o.onload=function(){void 0!==a&&g.eq(q).trigger(H.Event("changed.simplelightbox")).trigger(H.Event((1===a?"nextDone":"prevDone")+".simplelightbox")),r.history&&y(),-1==h.indexOf(d.attr("src"))&&h.push(d.attr("src"));var t,e=o.width,n=o.height;(s<e||l<n)&&(e/=t=s/l<e/n?e/s:n/l,n/=t),H(".sl-image").css({top:(H(K).height()-n)/2+"px",left:(H(K).width()-e-u)/2+"px"}),C.hide(),d.css({width:e+"px",height:n+"px"}).fadeIn("fast"),p=!0;var n="self"==r.captionSelector?g.eq(q):g.eq(q).find(r.captionSelector),i="data"==r.captionType?n.data(r.captionsData):"text"==r.captionType?n.html():n.prop(r.captionsData);r.loop||(0===q&&H(".sl-prev").hide(),q>=g.length-1&&H(".sl-next").hide(),0<q&&H(".sl-prev").show(),q<g.length-1&&H(".sl-next").show()),1==g.length&&H(".sl-prev, .sl-next").hide(),1==a||-1==a?(n={opacity:1},r.animationSlide&&(f?(L(0,100*a+"px"),setTimeout(function(){L(r.animationSpeed/1e3,"0px")})):n.left=parseInt(H(".sl-image").css("left"))+100*a+"px"),H(".sl-image").animate(n,r.animationSpeed,function(){I=!1,P(i)})):(I=!1,P(i)),r.additionalHtml&&0===H(".sl-additional-html").length&&H("<div>").html(r.additionalHtml).addClass("sl-additional-html").appendTo(H(".sl-image"))})},P=function(t){""!==t&&void 0!==t&&r.captions&&D.html(t).hide().appendTo(H(".sl-image")).delay(r.captionDelay).fadeIn("fast")},L=function(t,e){var n={};n[i+"transform"]="translateX("+e+")",n[i+"transition"]=i+"transform "+t+"s linear",H(".sl-image").css(n)},W=function(){H(K).on("resize."+w,O),H(B).on("click."+w+" touchstart."+w,".sl-close",function(t){t.preventDefault(),p&&Y()}),r.history&&setTimeout(function(){H(K).on("hashchange."+w,function(){p&&m()===v&&Y()})},40),S.on("click."+w,"button",function(t){t.preventDefault(),l=0,N(H(this).hasClass("sl-next")?1:-1)});var e,n,i=0,a=0,o=!1,s=0;M.on("touchstart."+w+" mousedown."+w,function(t){return!!o||(f&&(s=parseInt(M.css("left"))),o=!0,i=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,a=t.originalEvent.pageY||t.originalEvent.touches[0].pageY,!1)}).on("touchmove."+w+" mousemove."+w+" pointermove MSPointerMove",function(t){return!o||(t.preventDefault(),e=t.originalEvent.pageX||t.originalEvent.touches[0].pageX,n=t.originalEvent.pageY||t.originalEvent.touches[0].pageY,l=i-e,c=a-n,void(r.animationSlide&&(f?L(0,-l+"px"):M.css("left",s-l+"px"))))}).on("touchend."+w+" mouseup."+w+" touchcancel."+w+" mouseleave."+w+" pointerup pointercancel MSPointerUp MSPointerCancel",function(t){var e;o&&(e=!(o=!1),r.loop||(0===q&&l<0&&(e=!1),q>=g.length-1&&0<l&&(e=!1)),Math.abs(l)>r.swipeTolerance&&e?N(0<l?1:-1):r.animationSlide&&(f?L(r.animationSpeed/1e3,"0px"):M.animate({left:s+"px"},r.animationSpeed/2)),r.swipeClose&&50<Math.abs(c)&&Math.abs(l)<r.swipeTolerance&&Y())})},X=function(){S.off("click","button"),H(B).off("click."+w,".sl-close"),H(K).off("resize."+w),H(K).off("hashchange."+w)},z=function(){var t=q+1<0?g.length-1:q+1>=g.length-1?0:q+1,e=q-1<0?g.length-1:q-1>=g.length-1?0:q-1;H("<img />").attr("src",g.eq(t).attr("href")).on("load",function(){-1==h.indexOf(H(this).attr("src"))&&h.push(H(this).attr("src")),g.eq(q).trigger(H.Event("nextImageLoaded.simplelightbox"))}),H("<img />").attr("src",g.eq(e).attr("href")).on("load",function(){-1==h.indexOf(H(this).attr("src"))&&h.push(H(this).attr("src")),g.eq(q).trigger(H.Event("prevImageLoaded.simplelightbox"))})},N=function(e){g.eq(q).trigger(H.Event("change.simplelightbox")).trigger(H.Event((1===e?"next":"prev")+".simplelightbox"));var t=q+e;I||(t<0||t>=g.length)&&!1===r.loop||(q=t<0?g.length-1:t>g.length-1?0:t,H(".sl-wrapper .sl-counter .sl-current").text(q+1),t={opacity:0},r.animationSlide&&(f?L(r.animationSpeed/1e3,-100*e-l+"px"):t.left=parseInt(H(".sl-image").css("left"))+-100*e+"px"),H(".sl-image").animate(t,r.animationSpeed,function(){setTimeout(function(){var t=g.eq(q);d.attr("src",t.attr("href")),-1==h.indexOf(t.attr("href"))&&C.show(),H(".sl-caption").remove(),O(e),r.preloading&&z()},100)}))},Y=function(){var t,e;I||(t=g.eq(q),e=!1,t.trigger(H.Event("close.simplelightbox")),r.history&&b(),H(".sl-image img, .sl-overlay, .sl-close, .sl-navigation, .sl-image .sl-caption, .sl-counter").fadeOut("fast",function(){r.disableScroll&&j("show"),H(".sl-wrapper, .sl-overlay").remove(),X(),e||t.trigger(H.Event("closed.simplelightbox")),e=!0}),d=H(),I=p=!1)},j=function(t){var e,n=0;return"hide"==t?((t=K.innerWidth)||(t=(e=B.documentElement.getBoundingClientRect()).right-Math.abs(e.left)),B.body.clientWidth<t&&(e=B.createElement("div"),t=parseInt(H("body").css("padding-right"),10),e.className="sl-scrollbar-measure",H("body").append(e),n=e.offsetWidth-e.clientWidth,H(B.body)[0].removeChild(e),H("body").data("padding",t),0<n&&H("body").addClass("hidden-scroll").css({"padding-right":t+n}))):H("body").removeClass("hidden-scroll").css({"padding-right":H("body").data("padding")}),n};return r.close&&T.appendTo(R),r.showCounter&&1<g.length&&(k.appendTo(R),k.find(".sl-total").text(g.length)),r.nav&&S.appendTo(R),r.spinner&&C.appendTo(R),g.on("click."+w,function(t){if(e=this,!r.fileExt||"a"==H(e).prop("tagName").toLowerCase()&&new RegExp(".("+r.fileExt+")$","i").test(H(e).attr("href"))){if(t.preventDefault(),I)return!1;n(H(this))}var e}),H(B).on("click."+w+" touchstart."+w,function(t){p&&r.docClose&&0===H(t.target).closest(".sl-image").length&&0===H(t.target).closest(".sl-navigation").length&&Y()}),r.disableRightClick&&H(B).on("contextmenu",".sl-image img",function(t){return!1}),r.enableKeyboard&&H(B).on("keyup."+w,function(t){var e;l=0,p&&(t.preventDefault(),27==(e=t.keyCode)&&Y(),37!=e&&39!=t.keyCode||N(39==t.keyCode?1:-1))}),this.open=function(t){t=t||H(this[0]),n(t)},this.next=function(){N(1)},this.prev=function(){N(-1)},this.close=function(){Y()},this.destroy=function(){H(B).unbind("click."+w).unbind("keyup."+w),Y(),H(".sl-overlay, .sl-wrapper").remove(),this.off("click")},this.refresh=function(){this.destroy(),H(this.selector).simpleLightbox(r)},this}}(jQuery,window,document);